<!DOCTYPE html >
<html><head>
  <title> new document </title>
  <meta name="generator" content="editplus">
  <meta name="author" content="">
  <meta name="keywords" content="">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui"><meta name="mobile-web-app-capable" content="yes"><meta name="theme-color" content="black">
  <script src="0.2.0/aframe-html-shader.js"></script>
  <!--script src="0.2.0/aframe.min.js"></script-->
 <style>
  #target {
      width: 512px;
      height: 512px;
      position: absolute;
      background: rgba(255,255,255,0.3);
      font-family: monospace;
      font-size: 30px;
    }
  #target h2 {
      font-family: monospace;
      font-size: 60px;
      margin: 0px;
      vertical-align: top;
      color: black;
    }
    #target h2 span {
      color: red;
      text-shadow: 2px 2px 2px #fff, -2px 2px 2px #fff, -2px -2px 2px #fff, 2px -2px 2px #fff;
      background: blue;
    }
    #htmlTarget {
      position: absolute;
      z-index: 1;
      height: 100%;
      width: 100%;
      overflow: hidden;
    }
  </style>
 </head>

 <body>
  <a-scene rotation="0 45 0" style="z-index:1">
  <a-assets>
    <img id="dark" src="gdx8x6.png">
    <img id="gray" src="gx8x6.png">
    <img id="stripe" src="vr0_800.png">
    <img id="uni" src="proxy.jpg">
    <audio id="solitaire" src="solitaire.mp3">
  </audio></a-assets>
  
  <!-- Using the asset management system. -->
  
  <a-entity id="top" rotation="0 0 0">
    <a-box look-at="#top" position="0 -1.5 0" height="5" width="5" depth="0.5" color="#444" translate="0 0 0"></a-box>
    <a-box look-at="#top" position="0 1.5 0" height="5" width="5" depth="0.5" color="#444" translate="0 0 0"></a-box>
    <a-box look-at="#top" position="-1.5 0 0" height="3" width="3" depth="0.5" color="#fff" translate="0 0 0"></a-box>
    <a-box look-at="#top" position="1.5 0 0" height="3" width="3" depth="0.5" color="#fff" translate="0 0 0"></a-box>
    <a-box look-at="#top" position="0 0 -1.5" height="3" width="3" depth="0.5" color="#fff" translate="0 0 0"></a-box>
    <a-box look-at="#top" position="0 0 1.5" height="3" width="3" depth="0.5" color="#fff" translate="0 0 0"></a-box>
    
  </a-entity>
  

  <a-camera id="player" position="0 2 0" camera="active:true" look-controls="" wasd-controls="" rotation="95 0 0">
  <a-entity id="cursor" cursor="fuse: true; maxDistance: 2.5; timeout: 50" position="0 -0.5 -1.5" scale="0.1 0.1 0.2" geometry="primitive: ring; " material="color: white; shader: flat; opacity: 0.5" raycaster="">
  </a-entity>
  </a-camera>
  <a-entity camera="active:false" look-controls="" wasd-controls="" rotation="0 0 0" position="0 0 0"></a-entity>

  <!--a-entity light="type: ambient; color: #fff; intensity: 0.2"></a-entity-->
  <a-entity light="color: #fffff4; groundColor: #f4e9ff; intensity: 0.85; type: hemisphere"></a-entity>
  <!--a-entity light="type: spot; angle: 45, distance: -10; decay: 0.5;"></a-entity-->
  <a-entity light="type: point; intensity: 0.5; distance: 70; decay: 2.5"
          position="0 10 10"></a-entity>
  
  <a-sky src="#stripe" material="color:#FFF;shader:flat;src:#stripe" geometry="primitive:sphere;radius:5000;segmentsWidth:64;segmentsHeight:64" scale="-1 1 1"></a-sky>
  <!-- Defining the URL inline. Not recommended but more comfortable for web developers. -->
  <!--a-image src="tumblr_ni9i41ICA51qfjcnyo1_500.gif"></a-image-->
<div class="a-enter-vr" data-a-enter-vr-no-headset="" data-a-enter-vr-no-webvr=""><button class="a-enter-vr-button"></button><div class="a-enter-vr-modal"><p>Your browser does not support WebVR. To enter VR, use a VR-compatible browser or a mobile phone.</p><a href="http://mozvr.com/#start" target="_blank">Learn more.</a></div></div><div class="a-orientation-modal a-hidden"><button>Exit VR</button></div></a-scene>

<div id="htmlTarget" style="z-index: -1;" draggable="false">      
    <div id="target">
      <h2>Hello <span>&star;</span></h2>
      This is the A-Frame demo for my GalleryVR project. You can find the framework at <a href="http://aframe.io/">aframe.io</a>. <br> 
      <br>
      This is a minimal test which remodels the Serpentine Slacker Gallery inaccurately.
      Collision is not provided.<br> For more information please follow me on twitter or read my blog <a href="https://hogventure.com">hogventure.com</a>.
    </div>
 </div>
<script>
//[top,left,bottom,right,floor,ceiling]
  var _f = [0,0,0,0,1,1];
  var no = [0,0,0,0,0,0];
  var nt = [1,0,0,0,0,0];
  var nb = [0,0,1,0,0,0];
  var nl = [0,1,0,0,0,0];
  var nr = [0,0,0,1,0,0];
  var nhb = [0,0,2,0,0,0];
  var wt = [1,0,0,0,1,1];
  var wl = [0,1,0,0,1,1];
  var wb = [0,0,1,0,1,1];
  var wr = [0,0,0,1,1,1];
  var tl = [1,1,0,0,1,1];
  var tr = [1,0,0,1,1,1];
  var bl = [0,1,1,0,1,1];
  var br = [0,0,1,1,1,1];
  var _h = [0,0,0,0,1,2];
  var hr = [0,0,0,2,1,1];
  var hl = [0,2,0,0,1,1];
  var hb = [0,0,2,0,1,1];
  var ht = [2,0,0,0,1,1];
  var cr = [0,0,0,2,1,2];
  var cl = [0,2,0,0,1,2];
  var cb = [0,0,2,0,1,2];
  var ct = [2,0,0,0,1,2];

  var rh = [0,0,0,4,1,1];
  var lh = [0,4,0,0,1,1];
  var dt = [3,0,0,0,1,1];
  var db = [0,0,3,0,1,1];
  var dr = [0,0,0,3,1,1];
  var dl = [0,3,0,0,1,1];
  
  var fh = [0,2,2,0,1,1];
  var hf = [0,0,2,2,1,1];
  //wt = wall top
  //nr = no floor, but wall on the right
  //_f = floor with normal ceiling
  //_h = floor with high ceiling
  //hb = high bottom wall no floor/ceiling
  //ht = high (top) wall, floor & normal ceiling
  //hr&hl like et
  //serpentine west gallery
  var tilesSlacker = [
    [tl, wt, wt, tl, wt, wt, dt, wt, wt, tr, wt, wt, tr], 
    [wl, no, br, _f, _f, _f, _f, _f, _f, dr, _f, _f, wr], 
    [tl, wt, _f, _f, _f, _f, _f, _f, _f, _f, wt, wt, tr], 
    [wl, _f, _f, _f, _f, _f, _f, _f, _f, _f, _f, _f, wr], 
    [wl, _f, _f, hb, hb, hb, hb, hb, hb, hb, _f, _f, wr], 
    [wl, _f, hr, _h, _h, _h, _h, _h, _h, _h, hl, _f, wr], 
    [wl, _f, rh, _h, _h, _h, _h, _h, _h, _h, lh, _f, wr], 
    [wl, _f, hr, cb, cb, cb, cb, cb, cb, cb, hl, _f, wr], 
    [wl, _f, hr, _h, _h, _h, _h, _h, _h, _h, hl, _f, wr], 
    [wl, _f, rh, _h, _h, _h, _h, _h, _h, _h, lh, _f, wr], 
    [wl, _f, hr, cb, cb, cb, cb, cb, cb, cb, hl, _f, wr], 
    [wl, _f, _f, _f, _f, _f, _f, _f, _f, _f, _f, _f, wr], 
    [wl, _f, _f, _f, _f, _f, _f, _f, _f, _f, _f, _f, wr], 
    [bl, wb, wb, wb, wb, wb, db, wb, wb, wb, wb, wb, br]
  ];
  
  var tilesWest = [
    [tl, wt, wt, wt, tr, no, no, no, no, no, no, no, tl, wt, wt, wt, tr], 
    [wl, _f, _f, _f, wr, no, no, no, no, no, no, no, wl, _f, _f, _f, wr], 
    [wl, _f, _f, _f, wr,nhb,nhb,nhb,nhb,nhb,nhb,nhb, wl, _f, _f, _f, wr], 
    [wl, _f, _f, _f, rh, _h, _h, _h, _h, _h, _h, _h, lh, _f, _f, _f, wr], 
    [wl, _f, _f, _f, hr, _h, _h, _h, _h, _h, _h, _h, hl, _f, _f, _f, wr], 
    [wl, _f, _f, _f, hr, _h, _h, _h, _h, _h, _h, _h, hl, _f, _f, _f, wr], 
    [wl, _f, _f, _f, hr, _h, _h, _h, _h, _h, _h, _h, hl, _f, _f, _f, wr], 
    [wl, _f, _f, _f, hr, _h, _h, _h, _h, _h, _h, _h, hl, _f, _f, _f, wr], 
    [bl, wb, _f, _f, hr, _h, _h, _h, _h, _h, _h, _h, hl, _f, _f, wb, br], 
    [no, nr, _f, _f, _f, ht, ht, ht, ht, ht, ht, ht, _f, _f, _f, nl, no], 
    [no, no, bl, wb, wb, _f, _f, _f, _f, _f, _f, _f, wb, wb, br, no, no], 
    [no, no, no, no, nr, _f, _f, _f, _f, _f, _f, _f, nl, no, no, no, no], 
    [no, no, no, no, nr, _f, _f, _f, _f, _f, _f, _f, nl, no, no, no, no], 
    [no, no, no, no, no, bl, wb, wb, db, wb, wb, br, no, no, no, no, no]
  ];
  tiles = tilesWest;
  var isSlacker = (Math.random() > 0.5);
  if (isSlacker) {
    tiles = tilesSlacker;
  }
  var parent = document.querySelector('#top');
  //parent.innerHTML = '';
  var jm = Math.ceil(tiles.length/2);
  var im = Math.ceil(tiles[1].length/2);
  var _htm = '';
  for (var j = 0; j < tiles.length; j++) {
    var line = tiles[j];
    for (var i = 0; i < line.length; i++) {
      var tile = line[i];
      if (tile[4] >= 1) {
      _htm = _htm + '<a-box look-at="#top" position="0 -1 0" height="3" width="3" depth="0.2" color="'+(((j+i)%2)==1?'#222':'#111')+'" translate="'+((jm-j)*3)+' '+((im-i)*3)+' -0.5" rotation="0 0 90"></a-box>';
      }

      if (tile[5] == 1) {
      _htm = _htm + '<a-box look-at="#top" position="0 -1 0" height="3" width="3" depth="0.2" color="#ddd" translate="'+((jm-j)*3)+' '+((im-i)*3)+' 5.5"></a-box>';
      }

      if (tile[5] == 2) {
      _htm = _htm + '<a-box look-at="#top" position="0 -1 0" height="3" width="3" depth="0.2" color="#fff" translate="'+((jm-j)*3)+' '+((im-i)*3)+' 11.5"></a-box>';
      }

      if (tile[0] == 1 || tile[0] == 2) {
        _htm = _htm + '<a-box look-at="#top" position="0 0 1" height="3" width="3" depth="0.2" color="#fff" translate="'+((im-i)*3)+' 0 '+((1+jm-j)*3-0.5)+'"></a-box>';
        _htm = _htm + '<a-box look-at="#top" position="0 0 1" height="3" width="3" depth="0.2" color="#fff" translate="'+((im-i)*3)+' 3 '+((1+jm-j)*3-0.5)+'"></a-box>';  
      }
      if (tile[0] == 2 || tile[0] == 4) {
        _htm = _htm + '<a-box look-at="#top" position="0 0 1" height="3" width="3" depth="0.2" color="#fff" translate="'+((im-i)*3)+' 6 '+((1+jm-j)*3-0.5)+'"></a-box>';
        _htm = _htm + '<a-box look-at="#top" position="0 0 1" height="3" width="3" depth="0.2" color="#fff" translate="'+((im-i)*3)+' 9 '+((1+jm-j)*3-0.5)+'"></a-box>';        
      }
      if (tile[0] == 3 || tile[0] == 4) {
        _htm = _htm + '<a-box look-at="#top" position="0 0 1" height="1.5" width="3" depth="0.2" color="#fff" translate="'+((im-i)*3)+' 3.75 '+((1+jm-j)*3-0.5)+'"></a-box>';
      }
      
      if (tile[1] == 1 || tile[1] == 2) {
        _htm = _htm + '<a-box look-at="#top" position="1 0 0" height="3" width="3.2" depth="0.2" color="#fff" translate="'+((jm-j)*-3)+' 0 '+((im-i+1)*3-0.5)+'"></a-box>';
        _htm = _htm + '<a-box look-at="#top" position="1 0 0" height="3" width="3.2" depth="0.2" color="#fff" translate="'+((jm-j)*-3)+' 3 '+((im-i+1)*3-0.5)+'"></a-box>';
      }
      if (tile[1] == 2 || tile[1] == 4) {
        _htm = _htm + '<a-box look-at="#top" position="1 0 0" height="3" width="3.2" depth="0.2" color="#fff" translate="'+((jm-j)*-3)+' 6 '+((im-i+1)*3-0.5)+'"></a-box>';
        _htm = _htm + '<a-box look-at="#top" position="1 0 0" height="3" width="3.2" depth="0.2" color="#fff" translate="'+((jm-j)*-3)+' 9 '+((im-i+1)*3-0.5)+'"></a-box>';
      }
      if (tile[1] == 3 || tile[1] == 4) {
        _htm = _htm + '<a-box look-at="#top" position="1 0 0" height="1.5" width="3.2" depth="0.2" color="#fff" translate="'+((jm-j)*-3)+' 3.75 '+((im-i+1)*3-0.5)+'"></a-box>';
      }

      if (tile[2] == 1 || tile[2] == 2) {
        _htm = _htm + '<a-box look-at="#top" position="0 0 1" height="3" width="3" depth="0.2" color="#fff" translate="'+((im-i)*3)+' 0 '+((jm-j)*3-0.5)+'"></a-box>';
        _htm = _htm + '<a-box look-at="#top" position="0 0 1" height="3" width="3" depth="0.2" color="#fff" translate="'+((im-i)*3)+' 3 '+((jm-j)*3-0.5)+'"></a-box>';
      }
      if (tile[2] == 2 || tile[2] == 4) {
        _htm = _htm + '<a-box look-at="#top" position="0 0 1" height="3" width="3" depth="0.2" color="#fff" translate="'+((im-i)*3)+' 6 '+((jm-j)*3-0.5)+'"></a-box>';
        _htm = _htm + '<a-box look-at="#top" position="0 0 1" height="3" width="3" depth="0.2" color="#fff" translate="'+((im-i)*3)+' 9 '+((jm-j)*3-0.5)+'"></a-box>';
      }
      if (tile[2] == 3 || tile[2] == 4) {
        _htm = _htm + '<a-box look-at="#top" position="0 0 1" height="1.5" width="3" depth="0.2" color="#fff" translate="'+((im-i)*3)+' 3.75 '+((jm-j)*3-0.5)+'"></a-box>';
      }

      if (tile[3] == 1 || tile[3] == 2) {
        _htm = _htm + '<a-box look-at="#top" position="1 0 0" height="3" width="3.2" depth="0.2" color="#fff" translate="'+((jm-j)*-3)+' 0 '+((im-i)*3-0.5)+'"></a-box>';
        _htm = _htm + '<a-box look-at="#top" position="1 0 0" height="3" width="3.2" depth="0.2" color="#fff" translate="'+((jm-j)*-3)+' 3 '+((im-i)*3-0.5)+'"></a-box>';
      }
      if (tile[3] == 2 || tile[3] == 4) {
        _htm = _htm + '<a-box look-at="#top" position="1 0 0" height="3" width="3.2" depth="0.2" color="#fff" translate="'+((jm-j)*-3)+' 6 '+((im-i)*3-0.5)+'"></a-box>';
        _htm = _htm + '<a-box look-at="#top" position="1 0 0" height="3" width="3.2" depth="0.2" color="#fff" translate="'+((jm-j)*-3)+' 9 '+((im-i)*3-0.5)+'"></a-box>';
      }
      if (tile[3] == 3 || tile[3] == 4) {
        _htm = _htm + '<a-box look-at="#top" position="1 0 0" height="1.5" width="3.2" depth="0.2" color="#fff" translate="'+((jm-j)*-3)+' 3.75 '+((im-i)*3-0.5)+'"></a-box>';
      }
    }//i
  }
  
  parent.innerHTML = _htm;

  var scene = document.querySelector('a-scene');   
  var htmlTarget = document.getElementById('htmlTarget');

  var t = setTimeout(function() {
    if (isSlacker) {
      parent.innerHTML = parent.innerHTML + '<a-entity id="lettersEntity" geometry="primitive:box;width:1;height:1;depth:0.02" rotation="0 0 0" position="6 1.45 -7.7" material="shader:html;target:#target;transparent:true;ratio:width;fps:0;" sound="src: solitaire.mp3;"></a-entity>';
    } else {
      parent.innerHTML = parent.innerHTML + '<a-entity id="lettersEntity" geometry="primitive:box;width:1;height:1;depth:0.02" rotation="0 0 0" position="0 1.45 4.7" material="shader:html;target:#target;transparent:true;ratio:width;fps:0;" sound="src: solitaire.mp3;"></a-entity>';
    }
    document.querySelector('#lettersEntity').addEventListener('click', function (eve) {    
    console.log('#lettersEntity clicked');
    if (this.getAttribute('material')['color']=='red') {
      this.pause();
      this.setAttribute('material', 'color', 'transparent');
    } else {
      this.setAttribute('material', 'color', 'red');
      console.log(this, this.id+' was clicked!');
      this.play();
      setTimeout(function() { location.href = 'https://hogventure.com/Your_Gallery_VR_online.html';}, 500);
    } 
    document.querySelector('#htmlTarget').style.display = 'none';
    clearTimeout(t);
    t = 0;
  });
  }, 250);
 
</script>

</body></html>